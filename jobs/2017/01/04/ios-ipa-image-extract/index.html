<!DOCTYPE html>
<html>
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>the-galileo-theme</title>
  <meta name="description" content="作为一个移动端开发人员，经常要扒一扒其他项目的图片资源，可以用来直接使用或者做预开发时的占位图，也可以通过分析一个 ipa 中的图片资源来推导某一个功能的实现原理，简而言之，扒图也是开发人员应该具有的一个技能。考虑到年纪到了，忘东西越来越快，明年后年可能忘得更快，记一帖当做笔记。">
  
  
      <script>
      (function(d) {
         var config = {
            kitId: 'kwf5dox',
            scriptTimeout: 3000,
            async: true
        },
        h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
        })(document);
      </script>
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Libre+Baskerville:700|Sanchez" type="text/css">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="canonical" href="http://fengur.cn/jobs/2017/01/04/ios-ipa-image-extract/">
  <link rel="alternate" type="application/rss+xml" title="Fengur" href="http://fengur.cn/feed.xml">
</head>

    <body class="is-offset ">
        <header role="banner">
    <a href="/" id="banner" title="Fengur">
        <h1>Fengur</h1>
    </a>
</header>

        <section role="main">
            



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="http://fengur.cn/" itemprop="url"></a>
    </h3>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <div class="archive">
    
      <h1 id="page-title" class="page__title">the-galileo-theme</h1>
    
    <p>作为一个移动端开发人员，经常要扒一扒其他项目的图片资源，可以用来直接使用或者做预开发时的占位图，也可以通过分析一个 ipa 中的图片资源来推导某一个功能的实现原理，简而言之，扒图也是开发人员应该具有的一个技能。考虑到年纪到了，忘东西越来越快，明年后年可能忘得更快，记一帖当做笔记。</p>

<h6 id="1-获取目标-ipa">1. 获取目标 ipa</h6>

<p>比如你要看一下 QQ 里都用到了哪些图片，首先要做得就是弄一个 QQ 的 ipa，获取 ipa 方式多种多样，如 iTunes 获取、iTools 获取等等，这里选用 iTunes 来获取 <strong>QQ6.6.2.ipa</strong>。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-4c52416a1888486e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="0F49305C-B184-4C81-906A-0353475B8D50.png" /></p>

<p>搜索你想要查找的项目名称，然后点击 <strong>获取</strong>，下载完成就能在 <strong>资料库</strong> 里看到了。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-9428a8fd07f52b41.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="FDDDCDF3-C6CC-4484-8ED4-69FF84A12C7F.png" /></p>

<h6 id="2-拆解目标-ipa">2. 拆解目标 ipa</h6>

<p>将 <strong>QQ6.6.2.ipa</strong> 拓展名改为 <strong>.zip</strong> 后解压。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-3e974c62f4e34b89.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DD30A4FC-A9F2-420A-97AD-AC13EDBD5A65.png" /></p>

<p>此处插播一条题外消息，在包内容中也可以看到该工程的 <strong>plist</strong> 文件，感兴趣的同学也可以在这用拿到配置文件原型来啃一啃。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-2713b7a5d6ada0a9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p>接下来将刚才 <strong>查看包内容</strong> 后的文件夹单独拷贝出来，用一个单独文件夹接收，这是为了避免每次查看都要经过 <strong>显示包内容</strong> 操作。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-53eefebe28727407.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p><strong>ipa</strong> 的资源已经拆解完毕，可以简单预览一下。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-90eb7ac2acbb8056.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-6550fdbf632c20e9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-56505ed9774cc335.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-ab3e820d0330dd61.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-5b5bd53772c13e57.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-7e409d61979170ea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-eee6bd2fcf2ac182.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p>还有其他如 nib 文件、使用 SDK 相关信息、工程热更新代码配置等等都可以从这个包的内容里看到蛛丝马迹甚至部分源码。</p>

<h6 id="3-获得-imagesxcassets-中的图片">3. 获得 Images.xcassets 中的图片</h6>

<p>因为 QQ 的主题和自定义装扮配置较多，本地资源图片几乎全部暴露在 bundle 路径，所以经过上面几步的拆解，大部分图片资源都已经可以获得，但是现在很多本地资源的图片我们都放在了 <strong>Image.xcassets</strong> 中。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-f0b803d6e541d0b5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p>这个文件夹里的图片，在打包成 <strong>ipa</strong> 的时候 Xcode 会单独给它设置路径，形成一个新的文件显示在包内容中，这里以斗鱼的 <strong>ipa</strong> 来做示例。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-ebe2ae8e593108e2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-44e908ffe5b2c787.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p>到了这一步，最关键的 <strong>Assets.car</strong> 文件已经浮出水面了。</p>

<h6 id="4-利用-cartool-来解析-assetscar">4. 利用 cartool 来解析 Assets.car</h6>

<ol>
  <li>clone 或者 download <a href="https://github.com/steventroughtonsmith/cartool">cartool</a></li>
  <li>按照自己对于 source 资源的需求修改 cartool 内代码</li>
</ol>

<p>此处仅演示获取资源，所以将这部分代码修改如下：</p>

<div class="language-objc highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">NSString</span> <span class="o">*</span><span class="nf">idiomSuffixForCoreThemeIdiom</span><span class="p">(</span><span class="n">kCoreThemeIdiom</span> <span class="n">idiom</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="s">@""</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<ol>
  <li>将上一步获得的 <strong>Assets.car</strong> 拷贝到一个方便找到的位置，并新建一个文件夹来接收 <strong>Assets.car</strong> 中的图片。</li>
</ol>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-28277344a5491bf9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<ol>
  <li>给 cartool 修改 <strong>Scheme</strong></li>
</ol>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-d3f75a3522cb2225.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p>将上一部准备好的 <strong>Assets.car</strong> 和接收文件拖入到如下位置：</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-3f26b81de8faf546.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p><strong>MARK：</strong> 此处的顺序是固定的，不要弄反。</p>

<ol>
  <li>Run <strong>cartool</strong></li>
</ol>

<p>此时 log 中有一大堆资源的名字陆续出来，这就代表本次解析图片已经成功。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-6f286788b9b702d2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p>此时去查看接收文件的文件夹。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-2bae101b58199e95.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p>所有 <strong>Accests.car</strong> 中的图片已经拿到。</p>

<p><img src="http://upload-images.jianshu.io/upload_images/1155603-c0a41c08a2187ec6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="图片.png" /></p>

<p>这波 <strong>ipa</strong> 图片资源文件获取步骤已经差不多讲完，看起来很繁琐，其实很简单，就是一个熟练度的事情，忘记了的时候随时来瞅一眼就好，这也是笔记最合理的存在原因了，谢谢观众老爷的赏光。</p>


<ul class="taxonomy__index">
  
  
    <li>
      <a href="#2017">
        <strong>2017</strong> <span class="taxonomy__count">2</span>
      </a>
    </li>
  
</ul>




  <section id="2017" class="taxonomy__section">
    <h2 class="archive__subtitle">2017</h2>
    <div class="entries-list">
      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/jobs/2017/02/20/sougou-contact-code-explain/" rel="permalink">搜狗语音：通讯录优先识别代码说明
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">1. 文件说明
</p>
  </article>
</div>

      
        



<div class="list__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/jobs/2017/01/04/ios-ipa-image-extract/" rel="permalink">the-galileo-theme
</a>
      
    </h2>
    


    <p class="archive__item-excerpt" itemprop="description">作为一个移动端开发人员，经常要扒一扒其他项目的图片资源，可以用来直接使用或者做预开发时的占位图，也可以通过分析一个 ipa 中的图片资源来推导某一个功能的实现原理，简而言之，扒图也是开发人员应该具有的一个技能。考虑到年纪到了，忘东西越来越快，明年后年可能忘得更快，记一帖当做笔记。
</p>
  </article>
</div>

      
    </div>
    <a href="#page-title" class="back-to-top">Back to Top &uarr;</a>
  </section>


  </div>
</div>

        </section>
        <footer id="footer">
    <p>Your Host: <strong><a href="http://fengur.cn" target="_blank">Fengur</a></strong></p>
    <p class="legal">Easy life easy mind</p>
</footer>

        <script type="text/javascript" src="/js/galileo.js"></script>
    </body>
</html>
